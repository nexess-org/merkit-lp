---
const googleFormUrl = "https://docs.google.com/forms/d/e/1FAIpQLScDLNY4QlroD-XWvo34jxDAULNReFqDX8uGvw7W2I1dMbE0qA/viewform?embedded=true";
---

<section id="contact" class="py-20 md:py-28 bg-cream-100 relative overflow-hidden">
  <!-- Background decoration -->
  <div class="absolute bottom-0 right-0 w-1/3 h-full bg-gradient-to-l from-cream-200 to-transparent"></div>

  <div class="max-w-4xl mx-auto px-6 relative z-10">
    <!-- Section header -->
    <div class="max-w-2xl scroll-reveal">
      <span class="badge badge-muted">お問い合わせ</span>
      <h2 class="mt-4 text-3xl md:text-4xl font-display font-bold text-ink-900 tracking-tight">
        ご質問・ご要望は<br />
        お気軽にどうぞ
      </h2>
      <p class="mt-4 text-ink-600 leading-relaxed">
        機能のご質問、不具合のご報告、ご要望など、お気軽にお問い合わせください。
      </p>
    </div>

    <!-- Contact cards -->
    <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="card p-6 scroll-reveal" style="transition-delay: 0.1s;">
        <div class="feature-icon mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
          </svg>
        </div>
        <h3 class="text-ink-900 font-display font-semibold text-lg mb-2">一般的なご質問</h3>
        <p class="text-ink-500 text-sm leading-relaxed">
          機能や使い方について、お気軽にお問い合わせください。
        </p>
      </div>

      <div class="card p-6 scroll-reveal" style="transition-delay: 0.2s;">
        <div class="feature-icon mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z" />
          </svg>
        </div>
        <h3 class="text-ink-900 font-display font-semibold text-lg mb-2">技術的なサポート</h3>
        <p class="text-ink-500 text-sm leading-relaxed">
          エラーや不具合が発生した場合は、状況を詳しくお知らせください。
        </p>
      </div>
    </div>

    <!-- Form area -->
    <div class="mt-12 scroll-reveal" style="transition-delay: 0.3s;">
      {googleFormUrl ? (
        <div class="bg-white rounded-2xl border border-cream-200 overflow-hidden shadow-lg shadow-ink-900/5">
          <iframe
            src={googleFormUrl}
            width="100%"
            height="1000"
            frameborder="0"
            marginheight="0"
            marginwidth="0"
            title="お問い合わせフォーム"
            class="w-full"
          >
            読み込んでいます...
          </iframe>
        </div>
      ) : (
        <div class="bg-white rounded-2xl border border-cream-200 p-8 md:p-10 shadow-lg shadow-ink-900/5">
          <form class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="name" class="block text-ink-900 text-sm font-medium mb-2">お名前</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  class="w-full px-4 py-3 rounded-xl bg-cream-50 border border-cream-200 text-ink-900 placeholder-ink-400 focus:outline-none focus:ring-2 focus:ring-accent-500/20 focus:border-accent-500 transition-colors"
                  placeholder="山田 太郎"
                />
              </div>

              <div>
                <label for="email" class="block text-ink-900 text-sm font-medium mb-2">メールアドレス</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="w-full px-4 py-3 rounded-xl bg-cream-50 border border-cream-200 text-ink-900 placeholder-ink-400 focus:outline-none focus:ring-2 focus:ring-accent-500/20 focus:border-accent-500 transition-colors"
                  placeholder="example@email.com"
                />
              </div>
            </div>

            <div>
              <label for="category" class="block text-ink-900 text-sm font-medium mb-2">お問い合わせ種別</label>
              <select
                id="category"
                name="category"
                class="w-full px-4 py-3 rounded-xl bg-cream-50 border border-cream-200 text-ink-900 focus:outline-none focus:ring-2 focus:ring-accent-500/20 focus:border-accent-500 transition-colors"
              >
                <option value="">選択してください</option>
                <option value="general">一般的なご質問</option>
                <option value="support">技術的なサポート</option>
                <option value="billing">お支払いについて</option>
                <option value="feature">機能リクエスト</option>
                <option value="other">その他</option>
              </select>
            </div>

            <div>
              <label for="message" class="block text-ink-900 text-sm font-medium mb-2">お問い合わせ内容</label>
              <textarea
                id="message"
                name="message"
                rows="5"
                class="w-full px-4 py-3 rounded-xl bg-cream-50 border border-cream-200 text-ink-900 placeholder-ink-400 focus:outline-none focus:ring-2 focus:ring-accent-500/20 focus:border-accent-500 transition-colors resize-none"
                placeholder="お問い合わせ内容をご記入ください..."
              ></textarea>
            </div>

            <div class="pt-2">
              <button
                type="submit"
                class="w-full py-4 btn-accent text-base"
              >
                送信する
              </button>
            </div>

            <p class="text-ink-400 text-sm text-center">
              通常1〜2営業日以内にご返信いたします
            </p>
          </form>
        </div>
      )}
    </div>
  </div>
</section>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    },
    { threshold: 0.1 }
  );

  document.querySelectorAll('#contact .scroll-reveal').forEach((el) => {
    observer.observe(el);
  });
</script>
