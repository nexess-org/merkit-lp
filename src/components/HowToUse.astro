---
const steps = [
  {
    number: "01",
    title: "商品を選択",
    description: "メルカリの出品一覧ページで、変更したい商品にチェックを入れます。",
    image: "/images/step-1-select.png",
    imageAlt: "メルカリの出品一覧でMerkitツールバーが表示されている画面",
  },
  {
    number: "02",
    title: "設定を入力",
    description: "価格変更の金額や最低価格などを設定します。",
    image: "/images/step-2-configure.png",
    imageAlt: "Merkit拡張機能で価格変更の設定を入力している画面",
  },
  {
    number: "03",
    title: "自動処理",
    description: "実行ボタンを押すと、選択した商品が順番に自動処理されます。",
    image: "/images/step-3-processing.png",
    imageAlt: "Merkitが商品を処理中の画面",
  },
  {
    number: "04",
    title: "完了",
    description: "すべての処理が完了すると、結果が表示されます。",
    image: "/images/step-4-complete.png",
    imageAlt: "Merkitの処理完了画面",
  },
];
---

<section id="how-to-use" class="py-20 md:py-28 bg-cream-100">
  <div class="max-w-6xl mx-auto px-6">
    <!-- Section header -->
    <div class="text-center max-w-2xl mx-auto scroll-reveal">
      <span class="badge badge-muted">使い方</span>
      <h2 class="mt-4 text-3xl md:text-4xl font-display font-bold text-ink-900 tracking-tight">
        4ステップで完了
      </h2>
      <p class="mt-4 text-ink-600 leading-relaxed">
        シンプルなステップで、すぐに使い始められます。
      </p>
    </div>

    <!-- Steps with images -->
    <div class="mt-16 space-y-16 md:space-y-24">
      {steps.map((step, index) => (
        <div class={`scroll-reveal grid md:grid-cols-2 gap-8 md:gap-12 items-center ${index % 2 === 1 ? 'md:flex-row-reverse' : ''}`} style={`transition-delay: ${index * 0.1}s`}>
          <!-- Text content -->
          <div class={index % 2 === 1 ? 'md:order-2' : ''}>
            <span class="text-6xl font-display font-bold text-cream-300 leading-none">
              {step.number}
            </span>
            <h3 class="mt-2 text-2xl font-display font-semibold text-ink-900">
              {step.title}
            </h3>
            <p class="mt-3 text-ink-600 leading-relaxed">
              {step.description}
            </p>
          </div>

          <!-- Image -->
          <div class={`relative ${index % 2 === 1 ? 'md:order-1' : ''}`}>
            <div class="bg-white rounded-2xl p-3 shadow-lg shadow-ink-900/5 border border-cream-200">
              <img
                src={step.image}
                alt={step.imageAlt}
                class="rounded-lg w-full"
                loading="lazy"
              />
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    },
    { threshold: 0.1 }
  );

  document.querySelectorAll('#how-to-use .scroll-reveal').forEach((el) => {
    observer.observe(el);
  });
</script>
