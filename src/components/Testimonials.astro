---
const testimonials = [
  {
    content: "フリマアシストより断然使いやすい！UIがシンプルで直感的だから、迷わず操作できる。乗り換えて正解でした。",
    author: "アパレル出品者",
    years: "出品歴3年",
    rating: 5,
  },
  {
    content: "毎日の値下げ作業が5分で終わるようになった。100商品以上出品してるけど、もうこれなしでは考えられない。",
    author: "せどらー",
    years: "出品歴5年",
    rating: 5,
  },
  {
    content: "テンプレート機能が神。商品名や価格を自動で挿入してくれるから、コメント投稿も一瞬。時短効果がすごい。",
    author: "ハンドメイド作家",
    years: "出品歴2年",
    rating: 5,
  },
];

---

<section id="reviews" class="py-20 md:py-28 bg-cream-50 relative overflow-hidden">
  <!-- Background decoration -->
  <div class="absolute top-0 left-0 w-1/3 h-full bg-gradient-to-r from-cream-100 to-transparent"></div>

  <div class="max-w-6xl mx-auto px-6 relative z-10">
    <!-- Section header -->
    <div class="max-w-2xl scroll-reveal">
      <span class="badge badge-accent">レビュー</span>
      <h2 class="mt-4 text-3xl md:text-4xl font-display font-bold text-ink-900 tracking-tight">
        ユーザーの声
      </h2>
      <p class="mt-4 text-ink-600 leading-relaxed">
        多くの出品者の方にご利用いただいています。
      </p>
    </div>

    <!-- Testimonials -->
    <div class="mt-12 grid md:grid-cols-3 gap-6">
      {testimonials.map((testimonial, index) => (
        <article
          class="card p-6 relative scroll-reveal"
          style={`transition-delay: ${index * 0.1}s`}
        >
          <!-- Quote mark -->
          <span class="quote-mark">"</span>

          <!-- Stars -->
          <div class="flex gap-0.5 mb-4 relative z-10">
            {Array(5).fill(0).map((_, i) => (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                class={`w-4 h-4 ${i < testimonial.rating ? 'star-filled' : 'star-empty'}`}
              >
                <path fill-rule="evenodd" d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z" clip-rule="evenodd" />
              </svg>
            ))}
          </div>

          <!-- Content -->
          <p class="text-ink-700 leading-relaxed mb-6 relative z-10">
            {testimonial.content}
          </p>

          <!-- Author -->
          <div class="flex items-center gap-3 relative z-10">
            <div class="w-10 h-10 rounded-full bg-cream-200 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-ink-400">
                <path d="M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.493a1.23 1.23 0 00.41 1.412A9.957 9.957 0 0010 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 00-13.074.003z" />
              </svg>
            </div>
            <div>
              <p class="font-medium text-ink-900 text-sm">{testimonial.author}</p>
              <p class="text-xs text-ink-500">{testimonial.years}</p>
            </div>
          </div>
        </article>
      ))}
    </div>

  </div>
</section>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    },
    { threshold: 0.1 }
  );

  document.querySelectorAll('#reviews .scroll-reveal').forEach((el) => {
    observer.observe(el);
  });
</script>
