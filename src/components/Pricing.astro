---
interface Props {
  ctaUrl: string;
}

const { ctaUrl } = Astro.props;

const features = [
  { text: "一括価格変更（無制限）", included: true },
  { text: "一括コメント投稿", included: true },
  { text: "テンプレート機能（5個まで）", included: true },
  { text: "最低価格設定", included: true },
  { text: "BAN対策の遅延機能", included: true },
  { text: "進捗表示・通知", included: true },
  { text: "優先サポート", included: true },
  { text: "新機能の優先アクセス", included: true },
];
---

<section id="pricing" class="py-24 md:py-32 section-dark relative overflow-hidden">
  <!-- Background decorations -->
  <div class="orb orb-red w-96 h-96 -top-48 left-1/2 -translate-x-1/2 opacity-25"></div>

  <div class="max-w-4xl mx-auto px-6 relative z-10">
    <!-- Section header -->
    <div class="text-center mb-16 scroll-animate">
      <span class="badge badge-primary mb-4">Pricing</span>
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4 section-title">
        シンプルな料金プラン
      </h2>
      <p class="text-lg text-dark-200 section-subtitle">
        まずは1週間、無料でお試しください
      </p>
    </div>

    <!-- Pricing card -->
    <div class="max-w-lg mx-auto scroll-animate" style="animation-delay: 0.2s;">
      <div class="pricing-card rounded-3xl p-8 md:p-10 backdrop-blur-xl">
        <!-- Free trial badge -->
        <div class="flex justify-center mb-6">
          <span class="badge badge-success">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 mr-1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            1週間無料トライアル
          </span>
        </div>

        <!-- Price -->
        <div class="text-center mb-8">
          <div class="flex items-baseline justify-center gap-1">
            <span class="text-dark-300 text-xl">¥</span>
            <span class="text-6xl md:text-7xl font-bold text-white font-display tracking-tight">2,980</span>
            <span class="text-dark-300 text-lg">/月</span>
          </div>
          <p class="text-dark-300 mt-2 text-sm">税込価格</p>
        </div>

        <!-- Registration info -->
        <div class="glass-card rounded-xl p-4 mb-8">
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg bg-primary-500/20 flex items-center justify-center shrink-0 mt-0.5">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-primary-400">
                <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
              </svg>
            </div>
            <div>
              <p class="text-white text-sm font-medium mb-1">ご利用開始の流れ</p>
              <p class="text-dark-300 text-sm leading-relaxed">
                ユーザー登録とクレジットカード登録で、すぐにご利用いただけます。トライアル期間中はいつでもキャンセル可能です。
              </p>
            </div>
          </div>
        </div>

        <!-- Features list -->
        <div class="space-y-4 mb-10">
          {features.map((feature) => (
            <div class="flex items-center gap-3">
              <div class={`w-5 h-5 rounded-full flex items-center justify-center ${feature.included ? 'bg-green-500/20' : 'bg-dark-600'}`}>
                {feature.included ? (
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3 text-green-400">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                  </svg>
                ) : (
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-3 h-3 text-dark-400">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                  </svg>
                )}
              </div>
              <span class={feature.included ? 'text-white' : 'text-dark-400'}>{feature.text}</span>
            </div>
          ))}
        </div>

        <!-- CTA Button -->
        <a
          href={ctaUrl}
          class="block w-full py-4 px-6 text-center text-white font-semibold rounded-xl btn-primary glow-red-hover transition-all text-lg"
        >
          無料で始める
        </a>

        <!-- Additional info -->
        <p class="text-center text-dark-400 text-sm mt-4">
          クレジットカード登録が必要です
        </p>
      </div>
    </div>

    <!-- FAQ-like notes -->
    <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="text-center scroll-animate" style="animation-delay: 0.3s;">
        <div class="w-12 h-12 mx-auto mb-4 rounded-xl icon-container flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-primary-400">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
          </svg>
        </div>
        <h3 class="text-white font-semibold mb-1">いつでもキャンセル</h3>
        <p class="text-dark-300 text-sm">縛りなし。いつでも解約可能</p>
      </div>

      <div class="text-center scroll-animate" style="animation-delay: 0.4s;">
        <div class="w-12 h-12 mx-auto mb-4 rounded-xl icon-container flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-primary-400">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
          </svg>
        </div>
        <h3 class="text-white font-semibold mb-1">安全な決済</h3>
        <p class="text-dark-300 text-sm">Stripeによる安全な決済</p>
      </div>

      <div class="text-center scroll-animate" style="animation-delay: 0.5s;">
        <div class="w-12 h-12 mx-auto mb-4 rounded-xl icon-container flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-primary-400">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
          </svg>
        </div>
        <h3 class="text-white font-semibold mb-1">サポート付き</h3>
        <p class="text-dark-300 text-sm">お困りの際はお気軽に</p>
      </div>
    </div>
  </div>
</section>

<script>
  // Scroll animation observer
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    },
    { threshold: 0.1 }
  );

  document.querySelectorAll('#pricing .scroll-animate').forEach((el) => {
    observer.observe(el);
  });
</script>
