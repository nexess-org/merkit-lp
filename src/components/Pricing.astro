---
interface Props {
  ctaUrl: string;
}

const { ctaUrl } = Astro.props;

const features = [
  { text: "一括価格変更（値下げ・値上げ）", included: true },
  { text: "一括コメント投稿", included: true },
  { text: "コメント一括削除", included: true },
  { text: "テンプレート機能（5個まで）", included: true },
  { text: "テンプレート変数（商品名・価格）", included: true },
  { text: "最低価格設定", included: true },
  { text: "BAN対策のランダム遅延", included: true },
  { text: "リアルタイム進捗・通知", included: true },
];
---

<section id="pricing" class="py-20 md:py-28 bg-cream-50 relative">
  <div class="max-w-5xl mx-auto px-6">
    <!-- Section header -->
    <div class="text-center max-w-2xl mx-auto scroll-reveal">
      <span class="badge badge-accent">料金</span>
      <h2 class="mt-4 text-3xl md:text-4xl font-display font-bold text-ink-900 tracking-tight">
        シンプルな料金プラン
      </h2>
      <p class="mt-4 text-ink-600 leading-relaxed">
        まずは1週間、無料でお試しください
      </p>
    </div>

    <!-- Pricing card -->
    <div class="mt-12 max-w-md mx-auto scroll-reveal" style="transition-delay: 0.2s;">
      <div class="relative">
        <!-- Decorative accent -->
        <div class="absolute -top-3 -right-3 w-20 h-20 bg-accent-100 rounded-full -z-10"></div>

        <div class="bg-white rounded-2xl border border-cream-200 overflow-hidden shadow-lg shadow-ink-900/5">
          <!-- Header with trial badge -->
          <div class="bg-ink-900 px-8 py-6 text-center">
            <span class="inline-flex items-center gap-1.5 px-3 py-1 bg-green-500/20 text-green-400 text-sm font-medium rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
              </svg>
              1週間無料トライアル
            </span>
          </div>

          <div class="p-8">
            <!-- Price -->
            <div class="text-center mb-8">
              <div class="flex items-baseline justify-center gap-1">
                <span class="text-ink-500 text-xl font-medium">¥</span>
                <span class="text-6xl font-display font-bold text-ink-900 tracking-tight">2,980</span>
                <span class="text-ink-500 text-lg">/月</span>
              </div>
              <p class="text-ink-400 mt-2 text-sm">税込価格</p>
            </div>

            <!-- Info box -->
            <div class="bg-cream-100 rounded-xl p-4 mb-8">
              <div class="flex items-start gap-3">
                <div class="w-8 h-8 rounded-lg bg-accent-100 flex items-center justify-center shrink-0 mt-0.5">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 text-accent-500">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd" />
                  </svg>
                </div>
                <div>
                  <p class="text-ink-900 text-sm font-medium mb-1">ご利用開始の流れ</p>
                  <p class="text-ink-500 text-sm leading-relaxed">
                    ユーザー登録とクレジットカード登録で、すぐにご利用いただけます。
                  </p>
                </div>
              </div>
            </div>

            <!-- Features list -->
            <div class="space-y-3 mb-8">
              {features.map((feature) => (
                <div class="flex items-center gap-3">
                  <div class="w-5 h-5 rounded-full bg-green-100 flex items-center justify-center shrink-0">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 text-green-600">
                      <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  <span class="text-ink-700 text-sm">{feature.text}</span>
                </div>
              ))}
            </div>

            <!-- CTA Button -->
            <a
              href={ctaUrl}
              class="block w-full py-4 btn-accent text-center text-base group"
            >
              <span>無料で始める</span>
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 inline ml-2 group-hover:translate-x-1 transition-transform">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
              </svg>
            </a>

            <p class="text-center text-ink-400 text-sm mt-4">
              クレジットカード登録が必要です
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Trust badges -->
    <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="text-center scroll-reveal" style="transition-delay: 0.3s;">
        <div class="w-12 h-12 mx-auto mb-4 rounded-xl bg-cream-200 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-ink-600">
            <path d="M5.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H6a.75.75 0 01-.75-.75V12zM6 13.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V14a.75.75 0 00-.75-.75H6zM7.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H8a.75.75 0 01-.75-.75V12zM8 13.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V14a.75.75 0 00-.75-.75H8zM9.25 10a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H10a.75.75 0 01-.75-.75V10zM10 11.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V12a.75.75 0 00-.75-.75H10zM9.25 14a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H10a.75.75 0 01-.75-.75V14zM12 9.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V10a.75.75 0 00-.75-.75H12zM11.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H12a.75.75 0 01-.75-.75V12zM12 13.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V14a.75.75 0 00-.75-.75H12zM13.25 10a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H14a.75.75 0 01-.75-.75V10zM14 11.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V12a.75.75 0 00-.75-.75H14zM5.25 2.5A.75.75 0 016 1.75h8a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H6a.75.75 0 01-.75-.75V2.5zM16 1.75a.75.75 0 00-.75.75V18a.75.75 0 01-1.5 0V2.5c0-1.243 1.007-2.25 2.25-2.25h.01A2.25 2.25 0 0118.25 2.5v.01a.75.75 0 01-.75.75H16z" />
          </svg>
        </div>
        <h3 class="text-ink-900 font-semibold mb-1">いつでもキャンセル</h3>
        <p class="text-ink-500 text-sm">縛りなし・いつでも解約可能</p>
      </div>

      <div class="text-center scroll-reveal" style="transition-delay: 0.4s;">
        <div class="w-12 h-12 mx-auto mb-4 rounded-xl bg-cream-200 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-ink-600">
            <path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" />
          </svg>
        </div>
        <h3 class="text-ink-900 font-semibold mb-1">安全な決済</h3>
        <p class="text-ink-500 text-sm">Stripeによる安全な決済</p>
      </div>

      <div class="text-center scroll-reveal" style="transition-delay: 0.5s;">
        <div class="w-12 h-12 mx-auto mb-4 rounded-xl bg-cream-200 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-ink-600">
            <path d="M10 2a.75.75 0 01.75.75v5.59l1.95-2.1a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0L6.2 7.26a.75.75 0 111.1-1.02l1.95 2.1V2.75A.75.75 0 0110 2z" />
            <path d="M5.273 4.5a1.25 1.25 0 00-1.205.918l-1.523 5.52c-.006.02-.01.041-.015.062H6a1 1 0 01.894.553l.448.894a1 1 0 00.894.553h3.438a1 1 0 00.86-.49l.606-1.02A1 1 0 0114 11h3.47a1.318 1.318 0 00-.015-.062l-1.523-5.52a1.25 1.25 0 00-1.205-.918h-.977a.75.75 0 010-1.5h.977a2.75 2.75 0 012.651 2.019l1.523 5.52c.066.239.099.485.099.732V15a2 2 0 01-2 2H3a2 2 0 01-2-2v-3.73c0-.246.033-.492.099-.73l1.523-5.521A2.75 2.75 0 015.273 3h.977a.75.75 0 010 1.5h-.977z" />
          </svg>
        </div>
        <h3 class="text-ink-900 font-semibold mb-1">サポート付き</h3>
        <p class="text-ink-500 text-sm">お困りの際はお気軽に</p>
      </div>
    </div>
  </div>
</section>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    },
    { threshold: 0.1 }
  );

  document.querySelectorAll('#pricing .scroll-reveal').forEach((el) => {
    observer.observe(el);
  });
</script>
